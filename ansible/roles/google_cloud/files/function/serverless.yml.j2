service: netcdf-converter

frameworkVersion: ">=1.2.0 <2.0.0"

package:
  exclude:
    - node_modules/**
    - .gitignore
    - .git/**

plugins:
  - serverless-google-cloudfunctions

provider:
  name: google
  runtime: python37
  project: {{ gcp_project }}
  credentials: {{ gcp_cred_file }} # path must be absolute
  region: europe-west1

functions:
  netcdfConverter:
    memorySize: 2048
    timeout: 540s
    handler: convert_netcdf
    events:
      - event:
          eventType: google.storage.object.finalize
          resource: projects/{{ gcp_project }}/buckets/{{ glossis_bucket }}
